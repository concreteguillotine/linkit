<div class="comment">

    <div class="author">
        <% if comment.author.image.exists? %>
          <div class="user_avatar"> <%= link_to (image_tag comment.author.image), comment.author %> </div>
        <% else %>
          <div class="user_avatar"> <%= link_to (image_tag("/assets/avatar.png")), comment.author %> </div>
        <% end %>

        <div class="username"> <%= time_ago_in_words(comment.created_at) %> ago 
        &mdash; <%= link_to comment.author.username, comment.author %> </div>
    </div>
    <div class="message">
      <%= simple_format(comment.text) %>
    </div>
    <div class="likes">
      <%= comment.get_likes.size %> <%= (comment.get_likes.size) == 1 ? "vote!" : "votes!" %>
    <div class="actions">
      <% if user_signed_in? %>
        <%= link_to "Reply", new_post_comment_path(post, parent_id: post.comment.id) %>
        <% if (current_user == comment.author) || (current_user == @post.author) || (current_user.admin?) %>
          <%= link_to "Delete Comment",
            post_comment_path(comment.post, comment),
            data: { turbo_method: :delete, turbo_confirm: "Delete this comment?" } %>
        <% end %>
          <button id="vote"><%= link_to "Like", post_comment_like_path(@post, comment), method: :post, data: { turbo_frame: "like" } %> </button>
          <button id="vote"><%= link_to "Unike", post_comment_unlike_path(@post, comment), method: :post, data: { turbo_frame: "unlike" } %> </button>
      <% end %>
    </div>

    <% if comment.replies.any? %>
      <% comment.replies.each do |reply| %>
        <%= render partial: 'comments/reply', locals: { reply: reply } %>
      <% end %>
    <% end %>

    <div id="reply-form-<%= comment.id %>"> </div>
</div>
